{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Doggee API",
    "description": "API для управления пользователями и их собаками"
  },
  "host": "localhost:3001",
  "basePath": "/",
  "schemes": ["http"],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Введите ваш Bearer токен следующим образом: Bearer {token}"
    }
  },
  "security": [
    {
      "Bearer": []
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "Регистрация пользователя",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Данные для регистрации",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "username": { "type": "string" },
                "password": { "type": "string" }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Пользователь успешно создан",
            "examples": {
              "application/json": {
                "message": "User created successfully",
                "access_token": "eyJhbGciOiJIUzI1NiIsInR5...",
                "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5...",
                "userId": 1
              }
            }
          },
          "400": {
            "description": "Ошибка валидации",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "msg": "Username must be at least 5 chars long",
                    "param": "username",
                    "location": "body"
                  }
                ]
              }
            }
          },
          "401": {
            "description": "Пользователь уже существует",
            "examples": {
              "application/json": {
                "message": "User already exists"
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Вход пользователя",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Данные для входа",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "username": { "type": "string" },
                "password": { "type": "string" }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успешный вход",
            "examples": {
              "application/json": {
                "access_token": "eyJhbGciOiJIUzI1NiIsInR5...",
                "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5...",
                "userId": 1
              }
            }
          },
          "400": {
            "description": "Ошибка валидации",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "msg": "Username must be at least 5 chars long",
                    "param": "username",
                    "location": "body"
                  }
                ]
              }
            }
          },
          "401": {
            "description": "Неверные учетные данные",
            "examples": {
              "application/json": {
                "message": "Invalid credentials"
              }
            }
          }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "tags": ["Auth"],
        "summary": "Обновление токена",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Текущий refresh токен",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "refresh_token": { "type": "string" }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Токен обновлен",
            "examples": {
              "application/json": {
                "access_token": "eyJhbGciOiJIUzI1NiIsInR5...",
                "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5..."
              }
            }
          },
          "401": {
            "description": "Неверный refresh токен",
            "examples": {
              "application/json": {
                "message": "Invalid refresh token"
              }
            }
          }
        }
      }
    },
    "/users/{id}/profile": {
      "get": {
        "tags": ["Users"],
        "summary": "Получение профиля пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          }
        ],
        "responses": {
          "200": {
            "description": "Профиль пользователя",
            "examples": {
              "application/json": {
                "id": 1,
                "username": "johndoe",
                "name": "John Doe",
                "city": "New York",
                "birthdate": "1990-01-01",
                "dogs": [
                  {
                    "id": 1,
                    "name": "Buddy",
                    "breed": "Golden Retriever",
                    "age": 3
                  }
                ]
              }
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Обновление профиля пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Обновленные данные профиля",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "city": { "type": "string" },
                "birthdate": { "type": "string", "format": "date" }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Профиль обновлен",
            "examples": {
              "application/json": {
                "message": "Profile updated successfully"
              }
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      }
    },
    "/users/{id}/dogs": {
      "post": {
        "tags": ["Dogs"],
        "summary": "Создание собаки для пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Данные собаки",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "breed": { "type": "string" },
                "age": { "type": "integer" }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Собака создана",
            "examples": {
              "application/json": {
                "message": "Dog created successfully",
                "dog": {
                  "id": 1,
                  "name": "Buddy",
                  "breed": "Golden Retriever",
                  "age": 3,
                  "ownerId": 1
                }
              }
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Dogs"],
        "summary": "Получение списка собак пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          }
        ],
        "responses": {
          "200": {
            "description": "Список собак",
            "examples": {
              "application/json": [
                {
                  "id": 1,
                  "name": "Buddy",
                  "breed": "Golden Retriever",
                  "age": 3,
                  "ownerId": 1
                },
                {
                  "id": 2,
                  "name": "Max",
                  "breed": "Labrador",
                  "age": 2,
                  "ownerId": 1
                }
              ]
            }
          },
          "404": {
            "description": "Пользователь не найден",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      }
    },
    "/users/{userId}/dogs/{dogId}": {
      "get": {
        "tags": ["Dogs"],
        "summary": "Получение данных о конкретной собаке пользователя",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          },
          {
            "name": "dogId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID собаки"
          }
        ],
        "responses": {
          "200": {
            "description": "Данные собаки",
            "examples": {
              "application/json": {
                "id": 1,
                "name": "Buddy",
                "breed": "Golden Retriever",
                "age": 3,
                "ownerId": 1
              }
            }
          },
          "404": {
            "description": "Собака или пользователь не найдены",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Dogs"],
        "summary": "Обновление данных о конкретной собаке пользователя",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          },
          {
            "name": "dogId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID собаки"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Обновленные данные собаки",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "breed": { "type": "string" },
                "age": { "type": "integer" }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Собака обновлена",
            "examples": {
              "application/json": {
                "message": "Dog updated successfully",
                "dog": {
                  "id": 1,
                  "name": "Buddy",
                  "breed": "Golden Retriever",
                  "age": 3,
                  "ownerId": 1
                }
              }
            }
          },
          "403": {
            "description": "Доступ запрещен",
            "examples": {
              "application/json": {
                "message": "Access denied"
              }
            }
          },
          "404": {
            "description": "Собака или пользователь не найдены",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Dogs"],
        "summary": "Удаление конкретной собаки пользователя",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID пользователя"
          },
          {
            "name": "dogId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID собаки"
          }
        ],
        "responses": {
          "200": {
            "description": "Собака удалена",
            "examples": {
              "application/json": {
                "message": "Dog deleted successfully"
              }
            }
          },
          "403": {
            "description": "Доступ запрещен",
            "examples": {
              "application/json": {
                "message": "Access denied"
              }
            }
          },
          "404": {
            "description": "Собака или пользователь не найдены",
            "examples": {
              "application/json": {
                "message": "User not found"
              }
            }
          }
        }
      }
    }
  }
}
